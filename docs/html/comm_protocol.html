<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AVA LLC Documentation: Communication Protocols</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AVA LLC Documentation<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Documentation of LLC program used in AVA</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('comm_protocol.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Communication Protocols</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Defines UART and CAN data formats for all MAINBOARD subsystems.</p>
<h1><a class="anchor" id="overview"></a>
System Overview</h1>
<p>The MAINBOARD coordinates multiple subsystems over a shared CAN network. Each subsystem communicates using fixed message identifiers (11-bit standard) and specific byte mappings.</p>
<p>Below is a network diagram illustrating message flows between MAINBOARD and the subsystems (Throttle, Booster, Steering, Ultrasonic) plus UART telemetry:</p>
<div style="background:#8e8e8e; padding:10px; border-radius:6px; text-align:center;"> <img src="network.png" alt="" class="inline" title="System Network Diagram"/>    </div><div style="background:#8e8e8e; padding:10px; border-radius:6px; text-align:center;"> <em>Figure 1 — CAN topology overview</em> </div><h1><a class="anchor" id="uart"></a>
UART Telemetry Protocol</h1>
<p>Binary 34-byte data frame (<code>uart_data[34]</code>) sent via UART8 every 100 ms.</p>
<h2><a class="anchor" id="uart_config"></a>
Configuration</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Peripheral   </td><td class="markdownTableBodyNone">UART8    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Baud Rate   </td><td class="markdownTableBodyNone">115200 bps    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Format   </td><td class="markdownTableBodyNone">8N1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Direction   </td><td class="markdownTableBodyNone">Duplex   </td></tr>
</table>
<hr  />
 <h2><a class="anchor" id="uart_protocol"></a>
Complete UART Query / Response Protocol</h2>
<p>Defines the bidirectional serial protocol between MAINBOARD (slave) and Jetson (master) for data streaming, queries, and control commands.</p>
<p><b>Interface Characteristics</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Baud Rate</b>   </td><td class="markdownTableBodyNone">115200 bps    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Frame Type</b>   </td><td class="markdownTableBodyNone">8 data bits, 1 stop bit, no parity (8N1)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Default Period</b>   </td><td class="markdownTableBodyNone">100 ms (10 Hz)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Protocol Type</b>   </td><td class="markdownTableBodyNone">Query–Response   </td></tr>
</table>
<hr  />
 <h3><a class="anchor" id="uart_frame_structure"></a>
Frame Structure</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Bytes   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Header   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Fixed <code>0xA5</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Function Code   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Defines command type    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data   </td><td class="markdownTableBodyNone">0–nn   </td><td class="markdownTableBodyNone">Variable payload    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Checksum   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Additive sum of all bytes from Header to last Data   </td></tr>
</table>
<p>Example query frame: </p><div class="fragment"><div class="line">[0xA5] [0x01] [0xA6]</div>
</div><!-- fragment --><p> Example response frame: </p><div class="fragment"><div class="line">[0xA5] [0x11] [...data...] [Checksum]</div>
</div><!-- fragment --><hr  />
 <h2><a class="anchor" id="uart_func"></a>
Function Codes</h2>
<p>The protocol defines matching Query (0x00–0x06) and Response (0x10–0x16) codes:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Query   </th><th class="markdownTableHeadNone">Response   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Data Length    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x00   </td><td class="markdownTableBodyNone">0x10   </td><td class="markdownTableBodyNone">Stop streaming data   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x01   </td><td class="markdownTableBodyNone">0x11   </td><td class="markdownTableBodyNone">Request start streaming data   </td><td class="markdownTableBodyNone">32    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x02   </td><td class="markdownTableBodyNone">0x12   </td><td class="markdownTableBodyNone">Request specific data bytes   </td><td class="markdownTableBodyNone">Variable    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x03   </td><td class="markdownTableBodyNone">0x13   </td><td class="markdownTableBodyNone">Batch Command (Drive, Brake, Steer)   </td><td class="markdownTableBodyNone">5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x04   </td><td class="markdownTableBodyNone">0x14   </td><td class="markdownTableBodyNone">Drive Command   </td><td class="markdownTableBodyNone">3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x05   </td><td class="markdownTableBodyNone">0x15   </td><td class="markdownTableBodyNone">Brake Command   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x06   </td><td class="markdownTableBodyNone">0x16   </td><td class="markdownTableBodyNone">Steer Command   </td><td class="markdownTableBodyNone">1   </td></tr>
</table>
<hr  />
 <h2><a class="anchor" id="uart_stream"></a>
Streaming Data Format (Response 0x11)</h2>
<p>The streaming response contains <b>complete vehicle telemetry</b> (32 bytes total):</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Header   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone"><code>0xA5</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Function Code   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone"><code>0x11</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Battery Percentage   </td><td class="markdownTableBodyNone">int8_t   </td><td class="markdownTableBodyNone">0–100    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Charging Status   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">0=Idle, 1=Charging    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4–5   </td><td class="markdownTableBodyNone">RPM   </td><td class="markdownTableBodyNone">int16_t   </td><td class="markdownTableBodyNone">Wheel speed (×0.1)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">Brake Percentage   </td><td class="markdownTableBodyNone">int8_t   </td><td class="markdownTableBodyNone">0–100    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7   </td><td class="markdownTableBodyNone">Steer Angle   </td><td class="markdownTableBodyNone">int8_t   </td><td class="markdownTableBodyNone">−90° to +90°    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">8–9   </td><td class="markdownTableBodyNone">IMU X   </td><td class="markdownTableBodyNone">int16_t   </td><td class="markdownTableBodyNone">Raw accel X    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">10–11   </td><td class="markdownTableBodyNone">IMU Y   </td><td class="markdownTableBodyNone">int16_t   </td><td class="markdownTableBodyNone">Raw accel Y    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">12–13   </td><td class="markdownTableBodyNone">IMU Z   </td><td class="markdownTableBodyNone">int16_t   </td><td class="markdownTableBodyNone">Raw accel Z    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">14–15   </td><td class="markdownTableBodyNone">IMU Yaw   </td><td class="markdownTableBodyNone">int16_t   </td><td class="markdownTableBodyNone">−18000–18000 → ÷100 = −180°–180°    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">16–17   </td><td class="markdownTableBodyNone">IMU Pitch   </td><td class="markdownTableBodyNone">int16_t   </td><td class="markdownTableBodyNone">−18000–18000 → ÷100 = −180°–180°    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">18–19   </td><td class="markdownTableBodyNone">IMU Roll   </td><td class="markdownTableBodyNone">int16_t   </td><td class="markdownTableBodyNone">−18000–18000 → ÷100 = −180°–180°    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">20   </td><td class="markdownTableBodyNone">Radar Closest   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">0–255 → ×0.01 m    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">21   </td><td class="markdownTableBodyNone">Ultrasonic Front   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">0–255 → ×0.01 m    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">22   </td><td class="markdownTableBodyNone">Ultrasonic Rear   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">0–255 → ×0.01 m    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">23   </td><td class="markdownTableBodyNone">Front Bumper   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">0=Off, 1=Pressed    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">24   </td><td class="markdownTableBodyNone">Rear Bumper   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">0=Off, 1=Pressed    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">25–28   </td><td class="markdownTableBodyNone">GPS Latitude   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">−90.0000° to +90.0000°    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">29–32   </td><td class="markdownTableBodyNone">GPS Longitude   </td><td class="markdownTableBodyNone">float   </td><td class="markdownTableBodyNone">−180.0000° to +180.0000°    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">33   </td><td class="markdownTableBodyNone">Checksum   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">Sum of bytes 0–32   </td></tr>
</table>
<p>Query to enable streaming: </p><div class="fragment"><div class="line">A5 01 A6</div>
</div><!-- fragment --><p> Response (streaming data): </p><div class="fragment"><div class="line">A5 11 &lt;34-<span class="keywordtype">byte</span> payload&gt; [Checksum]</div>
</div><!-- fragment --><p>Query to stop streaming: </p><div class="fragment"><div class="line">A5 00 A5</div>
</div><!-- fragment --><p> Response: </p><div class="fragment"><div class="line">A5 10 B5</div>
</div><!-- fragment --><hr  />
 <h2><a class="anchor" id="uart_batch"></a>
Batch Command (0x03 / 0x13)</h2>
<p>Allows simultaneous control of throttle, brake, and steering every 200 ms.</p>
<p><b>Query (0x03)</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Header   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">0xA5    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Function Code   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">0x03    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2–3   </td><td class="markdownTableBodyNone">RPM Target   </td><td class="markdownTableBodyNone">uint16_t   </td><td class="markdownTableBodyNone">Desired RPM    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Direction   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">0=Forward,1=Reverse    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Brake   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">0=0%,255=100%    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">Steer Angle   </td><td class="markdownTableBodyNone">int8_t   </td><td class="markdownTableBodyNone">−120–120 (maps −30°–30°)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7   </td><td class="markdownTableBodyNone">Checksum   </td><td class="markdownTableBodyNone">uint8_t   </td><td class="markdownTableBodyNone">Sum of bytes 0–6   </td></tr>
</table>
<p><b>Response (0x13)</b> Returns current measured values:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Header (<code>0xA5</code>)   </td><td class="markdownTableBodyNone">Start    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Function Code (<code>0x13</code>)   </td><td class="markdownTableBodyNone">Acknowledge    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2–3   </td><td class="markdownTableBodyNone">Measured RPM   </td><td class="markdownTableBodyNone">uint16_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Direction   </td><td class="markdownTableBodyNone">0/1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Brake   </td><td class="markdownTableBodyNone">0–255    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">Steer Angle   </td><td class="markdownTableBodyNone">−120–120    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">7   </td><td class="markdownTableBodyNone">Checksum   </td><td class="markdownTableBodyNone">—   </td></tr>
</table>
<hr  />
 <hr  />
 <h2><a class="anchor" id="uart_cmd_individual"></a>
Individual Control Commands</h2>
<p>Command–response frames for direct control of drive, brake, and steering actuators.</p>
<p>Each command uses a <b>Query/Response</b> model between the Jetson (master) and MAINBOARD (slave). The Jetson issues a control command every 100–200 ms. If no new command is received within 300 ms, the MAINBOARD automatically applies a <b>safety stop</b> (brake = 100%, throttle = 0, steer = 0°).</p>
<p>All commands follow this structure: </p><div class="fragment"><div class="line">[Header 0xA5] [Function Code] [Data ...] [Checksum]</div>
</div><!-- fragment --><p>The <b>response frame</b> always uses the Function Code + 0x10 pattern. Example: <br  />
</p><ul>
<li>Query 0x04 → Response 0x14 <br  />
</li>
<li>Query 0x05 → Response 0x15 <br  />
</li>
<li>Query 0x06 → Response 0x16 <br  />
</li>
</ul>
<p><b>Checksum Calculation:</b> <br  />
 Add all bytes from Header (0xA5) to the last data byte, keep the lowest 8 bits.</p>
<hr  />
 <h3><a class="anchor" id="uart_drive"></a>
Drive Command (0x04 / 0x14)</h3>
<p>Controls the throttle subsystem (CAN2ANALOG) through UART interface.</p>
<p><b>Query (Jetson → MAINBOARD)</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Type / Range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Header   </td><td class="markdownTableBodyNone">Fixed <code>0xA5</code>   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Function Code   </td><td class="markdownTableBodyNone"><code>0x04</code>   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2–3   </td><td class="markdownTableBodyNone">RPM Target   </td><td class="markdownTableBodyNone">Desired wheel speed ×0.1   </td><td class="markdownTableBodyNone">uint16_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Direction   </td><td class="markdownTableBodyNone">0=Forward, 1=Reverse   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Checksum   </td><td class="markdownTableBodyNone">Additive sum of bytes 0–4   </td><td class="markdownTableBodyNone">uint8_t   </td></tr>
</table>
<p><b>Response (MAINBOARD → Jetson)</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Type / Range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Header   </td><td class="markdownTableBodyNone"><code>0xA5</code>   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Function Code   </td><td class="markdownTableBodyNone"><code>0x14</code> (acknowledge)   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2–3   </td><td class="markdownTableBodyNone">Measured RPM   </td><td class="markdownTableBodyNone">Current wheel speed ×0.1   </td><td class="markdownTableBodyNone">uint16_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Direction   </td><td class="markdownTableBodyNone">0=Forward,1=Reverse   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Checksum   </td><td class="markdownTableBodyNone">Additive sum 0–4   </td><td class="markdownTableBodyNone">uint8_t   </td></tr>
</table>
<p><b>Example</b> </p><div class="fragment"><div class="line">→ Jetson:   A5 04 10 27 00 E0   (Request +10000 RPM Forward)</div>
<div class="line">← Response: A5 14 0F 26 00 DE   (Actual +9750 RPM Forward)</div>
</div><!-- fragment --><p><b>Behavior</b></p><ul>
<li>Throttle control is internally forwarded to the CAN2ANALOG subsystem. <br  />
</li>
<li>The MAINBOARD scales RPM → PWM analog voltage output (1.0–3.3 V). <br  />
</li>
<li>Direction = 1 triggers reverse safety limiter (max 30% RPM). <br  />
</li>
<li>Command timeout (no update in 300 ms) forces throttle output = 0%.</li>
</ul>
<hr  />
 <h3><a class="anchor" id="uart_brake"></a>
Brake Command (0x05 / 0x15)</h3>
<p>Controls the Booster (brake actuator) via UART interface.</p>
<p><b>Query (Jetson → MAINBOARD)</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Type / Range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Header   </td><td class="markdownTableBodyNone">Fixed <code>0xA5</code>   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Function Code   </td><td class="markdownTableBodyNone"><code>0x05</code>   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Brake Command   </td><td class="markdownTableBodyNone">Desired brake intensity   </td><td class="markdownTableBodyNone">uint8_t (0–255)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Checksum   </td><td class="markdownTableBodyNone">Additive sum 0–2   </td><td class="markdownTableBodyNone">uint8_t   </td></tr>
</table>
<p><b>Response (MAINBOARD → Jetson)</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Type / Range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Header   </td><td class="markdownTableBodyNone"><code>0xA5</code>   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Function Code   </td><td class="markdownTableBodyNone"><code>0x15</code>   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Brake Applied   </td><td class="markdownTableBodyNone">Actual brake intensity   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Fault Status   </td><td class="markdownTableBodyNone">0=OK,1=FAULT   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Checksum   </td><td class="markdownTableBodyNone">Additive sum 0–3   </td><td class="markdownTableBodyNone">uint8_t   </td></tr>
</table>
<p><b>Example</b> </p><div class="fragment"><div class="line">→ Jetson:   A5 05 7F 29   (Set <a class="code hl_function" href="group___m_a_i_n_b_o_a_r_d.html#ga15fe3ce8250964de6f0317ff2653632c">Brake</a> = 127 / 50%)</div>
<div class="line">← Response: A5 15 80 00 3A   (Confirmed <a class="code hl_function" href="group___m_a_i_n_b_o_a_r_d.html#ga15fe3ce8250964de6f0317ff2653632c">Brake</a> = 128, No Fault)</div>
<div class="ttc" id="agroup___m_a_i_n_b_o_a_r_d_html_ga15fe3ce8250964de6f0317ff2653632c"><div class="ttname"><a href="group___m_a_i_n_b_o_a_r_d.html#ga15fe3ce8250964de6f0317ff2653632c">Brake</a></div><div class="ttdeci">void Brake(void *argument)</div><div class="ttdoc">Function implementing the myTask05 thread.</div><div class="ttdef"><b>Definition</b> main.c:1551</div></div>
</div><!-- fragment --><p><b>Behavior</b></p><ul>
<li>The MAINBOARD relays brake command to the Booster system (CAN ID 0x25). <br  />
</li>
<li>Nonlinear brake curve maps 0–255 to real PWM duty (%). <br  />
</li>
<li>Feedback reports current brake percentage and fault status. <br  />
</li>
<li>If CAN feedback lost, Brake = 255 (full stop) is automatically asserted.</li>
</ul>
<hr  />
 <h3><a class="anchor" id="uart_steer"></a>
Steering Command (0x06 / 0x16)</h3>
<p>Controls the Steering (EPS) subsystem via UART.</p>
<p><b>Query (Jetson → MAINBOARD)</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Type / Range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Header   </td><td class="markdownTableBodyNone">Fixed <code>0xA5</code>   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Function Code   </td><td class="markdownTableBodyNone"><code>0x06</code>   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Steer Angle   </td><td class="markdownTableBodyNone">Desired angle offset   </td><td class="markdownTableBodyNone">int8_t (−120–120)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Checksum   </td><td class="markdownTableBodyNone">Additive sum 0–2   </td><td class="markdownTableBodyNone">uint8_t   </td></tr>
</table>
<p><b>Response (MAINBOARD → Jetson)</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Type / Range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Header   </td><td class="markdownTableBodyNone"><code>0xA5</code>   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Function Code   </td><td class="markdownTableBodyNone"><code>0x16</code>   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Actual Angle   </td><td class="markdownTableBodyNone">Current steering angle   </td><td class="markdownTableBodyNone">int8_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Fault Code   </td><td class="markdownTableBodyNone">From EPS system   </td><td class="markdownTableBodyNone">uint8_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Checksum   </td><td class="markdownTableBodyNone">Additive sum 0–3   </td><td class="markdownTableBodyNone">uint8_t   </td></tr>
</table>
<p><b>Example</b> </p><div class="fragment"><div class="line">→ Jetson:   A5 06 1E C9   (Request +30° steer)</div>
<div class="line">← Response: A5 16 1D 00 D8   (Confirmed +29°, OK)</div>
</div><!-- fragment --><p><b>Behavior</b></p><ul>
<li>The MAINBOARD converts UART angle command → EPS CAN frame (0x314). <br  />
</li>
<li>Saturates to ±650° internally to avoid motor overtravel. <br  />
</li>
<li>EPS returns current angle and fault code to MAINBOARD, forwarded to Jetson. <br  />
</li>
<li>Faults include: over-temp, torque sensor, overcurrent (see Steering section).</li>
</ul>
<hr  />
 <h3><a class="anchor" id="uart_timing"></a>
Command Timing</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Cycle Time</b>   </td><td class="markdownTableBodyNone">100–200 ms   </td><td class="markdownTableBodyNone">Recommended update period    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Timeout</b>   </td><td class="markdownTableBodyNone">300 ms   </td><td class="markdownTableBodyNone">Safety stop threshold    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Checksum</b>   </td><td class="markdownTableBodyNone">8-bit additive   </td><td class="markdownTableBodyNone">Sum of all bytes except checksum    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Response Delay</b>   </td><td class="markdownTableBodyNone">≤10 ms   </td><td class="markdownTableBodyNone">MAINBOARD reply latency   </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>All integers use <b>little-endian byte order</b>. <br  />
</li>
<li>Invalid checksum or header (<code>0xA5</code>) causes frame rejection. <br  />
</li>
<li>Function Code + 0x10 pattern is mandatory for all responses. <br  />
</li>
<li>Commands may be mixed with streaming (0x11) if real-time telemetry is active.</li>
</ul>
</dd></dl>
<hr  />
 <h1><a class="anchor" id="can"></a>
CAN Bus Protocols</h1>
<p>CAN data structure and subsystem-specific frame mappings.</p>
<h2><a class="anchor" id="can_config"></a>
Configuration</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Baud Rate</b>   </td><td class="markdownTableBodyNone">500 kbps    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Frame Type</b>   </td><td class="markdownTableBodyNone">Standard 11-bit    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Mode</b>   </td><td class="markdownTableBodyNone">Normal    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Termination</b>   </td><td class="markdownTableBodyNone">120 Ω at both ends   </td></tr>
</table>
<hr  />
 <h2><a class="anchor" id="can_throttle"></a>
Throttle (CAN2ANALOG)</h2>
<p><b>TX ID:</b> 0x3B (MAINBOARD → CAN2ANALOG) <br  />
 <b>RX ID:</b> 0x3A (CAN2ANALOG → MAINBOARD)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0–1   </td><td class="markdownTableBodyNone">RPM Command   </td><td class="markdownTableBodyNone">Target throttle speed (uint16)   </td><td class="markdownTableBodyNone">0–65535    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Direction   </td><td class="markdownTableBodyNone">0 = Forward, 1 = Reverse   </td><td class="markdownTableBodyNone">—    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3–7   </td><td class="markdownTableBodyNone">Reserved   </td><td class="markdownTableBodyNone">—   </td><td class="markdownTableBodyNone">—   </td></tr>
</table>
<p><b>Feedback (0x3A)</b> <br  />
 </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0–1   </td><td class="markdownTableBodyNone">Output Voltage   </td><td class="markdownTableBodyNone">mV    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Direction   </td><td class="markdownTableBodyNone">0=FWD, 1=REV    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Controller Status   </td><td class="markdownTableBodyNone">OK/FAULT    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4–5   </td><td class="markdownTableBodyNone">Measured RPM   </td><td class="markdownTableBodyNone">uint16    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6–7   </td><td class="markdownTableBodyNone">Reserved   </td><td class="markdownTableBodyNone">—   </td></tr>
</table>
<p>Operational notes:</p><ul>
<li>Watchdog: throttle resets to safe state if CAN lost &gt; 200 ms.</li>
<li>PWM mapping: firmware maps RPM command → PWM duty via calibrated curve.</li>
</ul>
<hr  />
 <h2><a class="anchor" id="can_booster"></a>
Brake (iBooster)</h2>
<p><b>TX ID:</b> 0x1B (MAINBOARD → iBooster) <br  />
 <b>RX ID:</b> 0x1A (iBooster → MAINBOARD)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Brake Command   </td><td class="markdownTableBodyNone">Target brake level (0–255)   </td><td class="markdownTableBodyNone">0–255    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1–7   </td><td class="markdownTableBodyNone">Reserved   </td><td class="markdownTableBodyNone">—   </td><td class="markdownTableBodyNone">—   </td></tr>
</table>
<p><b>Feedback (0x1A)</b> <br  />
 </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Brake Applied   </td><td class="markdownTableBodyNone">% applied    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Duty Feedback   </td><td class="markdownTableBodyNone">%    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2–7   </td><td class="markdownTableBodyNone">Reserved   </td><td class="markdownTableBodyNone">—   </td></tr>
</table>
<p>Notes:</p><ul>
<li>Booster uses a nonlinear brake profile to model hydraulic feel.</li>
<li>Fault conditions are reported in feedback fault flag and optional error codes.</li>
</ul>
<hr  />
 <h2><a class="anchor" id="can_steering"></a>
Steering (EPS System)</h2>
<p>CAN protocol for the Brushless ADAS EPS controller.</p>
<p><b>TX ID:</b> 0x314 (MAINBOARD → EPS) <br  />
 <b>RX ID:</b> 0x18F (EPS → MAINBOARD)</p>
<h3><a class="anchor" id="autotoc_md14"></a>
Command Frame (0x314)</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Mode Flags   </td><td class="markdownTableBodyNone">bit0=Wire-control enable<br  />
bit2=Calibrate center   </td><td class="markdownTableBodyNone">—    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1–2   </td><td class="markdownTableBodyNone">Target Angle   </td><td class="markdownTableBodyNone">Desired steering angle (int16)   </td><td class="markdownTableBodyNone">−650° to +650°    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3–4   </td><td class="markdownTableBodyNone">Angular Velocity   </td><td class="markdownTableBodyNone">Commanded turn rate (uint16)   </td><td class="markdownTableBodyNone">50–520 °/s    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5–7   </td><td class="markdownTableBodyNone">Reserved   </td><td class="markdownTableBodyNone">—   </td><td class="markdownTableBodyNone">—   </td></tr>
</table>
<p>Examples:</p><ul>
<li><code>04 00 00 00 00 00 00 00</code> → Calibrate current position to 0° <br  />
</li>
<li><code>01 00 A0 00 00 00 00 00</code> → Rotate +180° at default speed</li>
</ul>
<h3><a class="anchor" id="autotoc_md15"></a>
Feedback Frame (0x18F)</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Status Flags   </td><td class="markdownTableBodyNone">bit0=Wire-mode<br  />
bit1=Fault   </td><td class="markdownTableBodyNone">—    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1–2   </td><td class="markdownTableBodyNone">Current Angle   </td><td class="markdownTableBodyNone">int16   </td><td class="markdownTableBodyNone">−650° to +650°    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3–4   </td><td class="markdownTableBodyNone">Current Velocity   </td><td class="markdownTableBodyNone">uint16   </td><td class="markdownTableBodyNone">0–520 °/s    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Motor Current   </td><td class="markdownTableBodyNone">int8   </td><td class="markdownTableBodyNone">−128–127 A    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">ECU Temp   </td><td class="markdownTableBodyNone">uint8   </td><td class="markdownTableBodyNone">°C    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">7   </td><td class="markdownTableBodyNone">Fault Code   </td><td class="markdownTableBodyNone">enum (0x0–0xD)   </td><td class="markdownTableBodyNone">see table   </td></tr>
</table>
<p><b>Fault Codes</b> </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Code   </th><th class="markdownTableHeadNone">Meaning    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x0   </td><td class="markdownTableBodyNone">No fault    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x1   </td><td class="markdownTableBodyNone">Over-voltage    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x2   </td><td class="markdownTableBodyNone">Under-voltage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x3   </td><td class="markdownTableBodyNone">Controller over-temp (mild)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x4   </td><td class="markdownTableBodyNone">Controller over-temp (critical)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x5   </td><td class="markdownTableBodyNone">Torque sensor fault    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x6   </td><td class="markdownTableBodyNone">Angle sensor fault    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x7   </td><td class="markdownTableBodyNone">Internal fault    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x8   </td><td class="markdownTableBodyNone">EEPROM fault    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x9   </td><td class="markdownTableBodyNone">Communication fault    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0xA   </td><td class="markdownTableBodyNone">Center not calibrated    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0xB   </td><td class="markdownTableBodyNone">Motor stall    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0xC   </td><td class="markdownTableBodyNone">Motor over-current    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0xD   </td><td class="markdownTableBodyNone">Motor/drive failure   </td></tr>
</table>
<p>Safety:</p><ul>
<li>No valid CAN &gt; 300 ms → ECU falls back to manual assist mode.</li>
<li>Torque/time thresholds trigger mode transitions (see spec).</li>
</ul>
<hr  />
 <h2><a class="anchor" id="can_ultrasonic"></a>
Ultrasonic (Distance Sensors)</h2>
<p><b>TX ID:</b> 0x12 (ULTRASONIC → MAINBOARD)</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Byte   </th><th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Unit    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0–1   </td><td class="markdownTableBodyNone">Front-Left   </td><td class="markdownTableBodyNone">Distance   </td><td class="markdownTableBodyNone">cm    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2–3   </td><td class="markdownTableBodyNone">Front-Right   </td><td class="markdownTableBodyNone">Distance   </td><td class="markdownTableBodyNone">cm    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4–5   </td><td class="markdownTableBodyNone">Rear-Left   </td><td class="markdownTableBodyNone">Distance   </td><td class="markdownTableBodyNone">cm    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6–7   </td><td class="markdownTableBodyNone">Rear-Right   </td><td class="markdownTableBodyNone">Distance   </td><td class="markdownTableBodyNone">cm   </td></tr>
</table>
<p>Notes:</p><ul>
<li>Minimum range: 25 cm (below this triggers obstacle warning).</li>
<li>Maximum range: 600 cm (values above treated as "no object").</li>
<li>Sensors are polled sequentially to avoid echo cross-talk.</li>
</ul>
<h1><a class="anchor" id="ref"></a>
Related Subsystems</h1>
<ul>
<li><a class="el" href="group___m_a_i_n_b_o_a_r_d.html">MAINBOARD</a></li>
<li>THROTTLE_SYSTEM</li>
<li>BOOSTER_SYSTEM</li>
<li>STEERING_SYSTEM</li>
<li>ULTRASONIC_SYSTEM </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
